 {Project: EE-9 Platform: Parallax Project USB Board Revision: 1.1 Author: Dillon Chew Date: 28 Nov 2021 Log:   Date: Desc        28/11/2021: Added a repeat loop to Commcore to recheck for rxvalue}CON        _clkmode = xtal1 + pll16x                                               'Standard clock mode * crystal frequency = 80 MHz        _xinfreq = 5_000_000        _ConClkFreq = ((_clkmode - xtal1 >> 6) * _xinfreq)        'ZigBee commands        commStart = $7A        commForward = $01        commReverse = $02        commLeft = $03        commRight = $04        commStop =$AA        commRxPin=21   'DOUT        commTxPin=20   'DIN        commBaud=9600VAR  long cogIDNum, cogStack[128], rxVal'Stack space for cog  long _Ms_001OBJ  Comm        : "FullDuplexSerial.spin"  MotorCon    : "MotorControl.spin"  'Term        : "FullDuplexSerial.spin"PUB Start(mainMSVal, decision)  _Ms_001 := mainMSVal  Stop  cogIDNum := cognew(CommCore(decision), @cogStack)    'initialise comms cog  returnPUB Stop  if cogIDNum    cogstop (cogIDNum~)PUB CommCore(decision)  Comm.Start(commTxPin,commRxPin,0,CommBaud)  repeat    rxVal := Comm.RxCheck    if rxVal == CommStart     repeat        rxVal := Comm.RxCheck        case rxVal          CommForward:            long[decision] := 1          CommReverse:            long[decision] := 2          CommLeft:            long[decision] := 3          CommRight:            long[decision] := 4          CommStop:            long[decision] := 5PRI Pause (ms) | t  t := cnt - 1088  repeat (ms#>0)    waitcnt (t+=_Ms_001)  returnDATname    byte  "string_data",0